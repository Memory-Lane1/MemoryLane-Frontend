{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/jaskaran/Desktop/poogle/Poogle/src/components/add_forms/addQuestions.js\";\nimport React, { Component } from 'react';\nimport { Container, Row, Col, Button, Image } from 'react-bootstrap';\nimport { Breadcrumb, BreadcrumbItem, Jumbotron } from \"reactstrap\";\nimport { Link } from 'react-router-dom';\nimport './add_forms.css';\nimport Form from 'react-bootstrap/Form';\nimport Select from 'react-select';\nimport ReactQuill from 'react-quill';\nimport { Quill } from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport ImageCompress from 'quill-image-compress';\nimport { spaces, toolbarOptions, formats } from '../variables';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { zoomOut, slideInDown, slideInUp, bounce, flipInX, zoomIn } from 'react-animations';\nimport Radium, { StyleRoot } from 'radium';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { message } from 'antd'; // Quill.register('modules/imageCompress', ImageCompress);\n\nimport swal from 'sweetalert';\nimport img from \"/home/jaskaran/Desktop/poogle/Poogle/src/abc.jpg\";\nimport * as ipfsClient from 'ipfs-http-client';\nQuill.register('modules/imageCompress', ImageCompress);\nconst ipfs = ipfsClient.create({\n  host: 'ipfs.infura.io',\n  port: 5001,\n  protocol: 'https'\n});\nconst styles = {\n  zoomIn: {\n    animation: 'x 1s',\n    animationName: Radium.keyframes(zoomIn, 'zoomIn')\n  },\n  slideInUp: {\n    animation: 'x 1s',\n    animationName: Radium.keyframes(slideInUp, 'slideInUp')\n  },\n  bounce: {\n    animation: 'x 1s',\n    animationName: Radium.keyframes(bounce, 'bounce')\n  },\n  flipInX: {\n    animation: 'x 1s',\n    animationName: Radium.keyframes(flipInX, 'flipInX')\n  }\n};\n\nclass addQuestions extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onFileChange = e => {\n      e.preventDefault();\n      const file = e.target.files[0];\n      const reader = new window.FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onloadend = () => {\n        this.setState({\n          buffer: Buffer(reader.result)\n        });\n        console.log('buffer', this.state.buffer);\n      };\n\n      console.log(\"Submitting file to ipfs...\");\n    };\n\n    this.modules = {\n      toolbar: toolbarOptions,\n      imageCompress: {\n        quality: 0.7,\n        maxWidth: 500,\n        maxHeight: 500,\n        imageType: 'image/jpeg',\n        debug: true\n      }\n    };\n\n    this.handleMultiSelectChange = category => {\n      this.setState({\n        category: category\n      });\n    };\n\n    this.notify = message => toast.warning(message);\n\n    this.notifyS = message => toast.success(message);\n\n    this.notifyF = message => toast.error(message);\n\n    this.handleSubmit = async event => {\n      event.preventDefault();\n      const isValid = this.formValidation();\n      console.log(this.state);\n\n      if (isValid) {\n        var tagNames = [];\n        var tagIds = [];\n        var len = this.state.category.length;\n        var flag = false;\n\n        for (var i = 0; i < len; i++) {\n          tagNames.push(this.state.category[i].label);\n          tagIds.push(this.state.category[i].value);\n          var interests_ = localStorage.getItem('interests');\n          if (interests_.indexOf(this.state.category[i].value) > -1) flag = true;\n        }\n\n        if (flag) {\n          const newQuestion = {\n            heading: this.state.title,\n            tagNames: tagNames,\n            tagIds: tagIds,\n            description: this.state.description,\n            author: this.props.auth.userId\n          };\n          await this.props.postQuestion(newQuestion);\n          if (this.props.questions.postFail) this.notifyF(\"Some Error occured while posting try again.\");else this.notifyS('Question posted successfully!!');\n        } else {\n          this.notify(\"Atleast one category should be in your followed spaces list . you can follow required space to add this question!!\");\n        }\n      }\n    };\n\n    this.formValidation = () => {\n      const {\n        image\n      } = this.state;\n      let imageError, error;\n\n      if (image) {\n        if (image.type != \"image/jpeg\" && image.type != \"image/png\") {\n          imageError = \"You must upoad a valid jpeg/png image file\";\n          error = true;\n        } else if (image.size >= 1000000) {\n          imageError = \"Maximum permissible size of an image is 1Mb\";\n          error = true;\n        }\n      }\n\n      this.setState(prevState => ({\n        errors: {\n          image: imageError\n        }\n      }));\n      return !error;\n    };\n\n    this.handleImageUpload = e => {\n      e.preventDefault();\n      console.log(e.target.files[0]);\n      this.setState({\n        image: e.target.files[0],\n        errors: {\n          image: \"\"\n        }\n      });\n    };\n\n    this.fetchPrediction = async () => {\n      try {\n        let response = await fetch(\"http://127.0.0.1:8000/\" + `predict?file_hash=${this.state.fileHash}`, {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n\n        if (response.ok) {\n          response = await response.json();\n          console.log(response); // dispatch({ type: GET_GENERATED_ASSET, payload: response });\n        } else {\n          response = await response.text();\n          console.log(\"Error\", response);\n          throw new Error(response);\n        }\n      } catch (err) {\n        console.log(\"err\", err.message); // dispatch({ type: GENERATED_ASSET_FAILED, payload: err.message });\n      }\n    };\n\n    this.state = {\n      fileHash: '',\n      fileUploading: false,\n      description: '',\n      title: '',\n      category: [],\n      files: [],\n      image: '',\n      errors: {\n        description: '',\n        category: '',\n        title: '',\n        image: ''\n      }\n    };\n    this.handleEditorChange = this.handleEditorChange.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleMultiSelectChange = this.handleMultiSelectChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  async uploadFile() {\n    try {\n      this.setState({\n        fileUploading: true\n      });\n      const file = await ipfs.add(this.state.buffer);\n      this.setState({\n        fileHash: file.path,\n        fileUploading: false\n      });\n      swal({\n        title: \"Success!!\",\n        text: 'File Posted!!',\n        icon: \"success\"\n      });\n      console.log(file.path);\n    } catch (error) {\n      this.setState({\n        fileUploading: false,\n        buffer: null\n      });\n      swal({\n        title: \"OOPS!!\",\n        text: 'Something Went Wrong. Try again!!',\n        icon: \"error\"\n      });\n    }\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const name = target.name;\n    this.setState({\n      [name]: event.target.value\n    });\n  }\n\n  handleEditorChange(value) {\n    this.setState({\n      description: value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"forms__section\",\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: 9,\n          className: \"contact__main__content\",\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Breadcrumb, {\n              className: \"mb-4 page__navigation__breadCrump\",\n              children: [/*#__PURE__*/_jsxDEV(BreadcrumbItem, {\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/home\",\n                  children: \"Home\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(BreadcrumbItem, {\n                active: true,\n                children: \"Add Question\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Jumbotron, {\n              className: \"form-jumbotron\",\n              children: /*#__PURE__*/_jsxDEV(Form, {\n                children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"form__icon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 291,\n                      columnNumber: 45\n                    }, this), \"Describe Here\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 107\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    onChange: e => this.onFileChange(e),\n                    className: \"new-item-card-button\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 293,\n                    columnNumber: 39\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"invalid__feedback\",\n                    children: this.state.errors.image\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 35\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 31\n                }, this), this.state.image ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Image, {\n                    src: \"\",\n                    fluid: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 301,\n                    columnNumber: 33\n                  }, this), \" \"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: () => this.uploadFile(),\n                  variant: \"info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"fa fa-paper-plane mr-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 302,\n                    columnNumber: 86\n                  }, this), \"Submit\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  style: {\n                    marginLeft: 10\n                  },\n                  onClick: () => this.fetchPrediction(),\n                  variant: \"info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"fa fa-cog mr-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 303,\n                    columnNumber: 115\n                  }, this), \"Predict\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"form__icon\",\n                    style: {\n                      marginTop: 10\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 306,\n                    columnNumber: 43\n                  }, this), \"Describe Here\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 122\n                }, this), /*#__PURE__*/_jsxDEV(Image, {\n                  src: img,\n                  style: {\n                    width: \"100%\",\n                    marginTop: 15,\n                    marginBottom: 10\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 31\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 27\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n        autoClose: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default addQuestions;","map":{"version":3,"sources":["/home/jaskaran/Desktop/poogle/Poogle/src/components/add_forms/addQuestions.js"],"names":["React","Component","Container","Row","Col","Button","Image","Breadcrumb","BreadcrumbItem","Jumbotron","Link","Form","Select","ReactQuill","Quill","ImageCompress","spaces","toolbarOptions","formats","ToastContainer","toast","zoomOut","slideInDown","slideInUp","bounce","flipInX","zoomIn","Radium","StyleRoot","message","swal","img","ipfsClient","register","ipfs","create","host","port","protocol","styles","animation","animationName","keyframes","addQuestions","constructor","props","onFileChange","e","preventDefault","file","target","files","reader","window","FileReader","readAsArrayBuffer","onloadend","setState","buffer","Buffer","result","console","log","state","modules","toolbar","imageCompress","quality","maxWidth","maxHeight","imageType","debug","handleMultiSelectChange","category","notify","warning","notifyS","success","notifyF","error","handleSubmit","event","isValid","formValidation","tagNames","tagIds","len","length","flag","i","push","label","value","interests_","localStorage","getItem","indexOf","newQuestion","heading","title","description","author","auth","userId","postQuestion","questions","postFail","image","imageError","type","size","prevState","errors","handleImageUpload","fetchPrediction","response","fetch","fileHash","method","headers","ok","json","text","Error","err","fileUploading","handleEditorChange","bind","handleInputChange","uploadFile","add","path","icon","name","render","marginLeft","marginTop","width","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {Container, Row, Col,Button,Image} from 'react-bootstrap';\nimport { Breadcrumb, BreadcrumbItem, Jumbotron } from \"reactstrap\";\nimport {Link} from 'react-router-dom'\nimport './add_forms.css'\nimport Form from 'react-bootstrap/Form';\nimport Select from 'react-select'\nimport ReactQuill from 'react-quill';\nimport {Quill} from 'react-quill'\nimport 'react-quill/dist/quill.snow.css'; \nimport ImageCompress from 'quill-image-compress';\nimport {spaces,toolbarOptions, formats} from '../variables'; \nimport { ToastContainer, toast } from 'react-toastify';\nimport { zoomOut, slideInDown, slideInUp, bounce, flipInX, zoomIn } from 'react-animations';\nimport Radium, {StyleRoot} from 'radium';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { message } from 'antd';\n// Quill.register('modules/imageCompress', ImageCompress);\nimport swal from 'sweetalert';\nimport img from \"/home/jaskaran/Desktop/poogle/Poogle/src/abc.jpg\"\n\n\nimport * as ipfsClient  from 'ipfs-http-client';\nQuill.register('modules/imageCompress', ImageCompress);\nconst ipfs = ipfsClient.create({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' });\n\n\nconst styles = {\n\n  zoomIn: {\n    animation: 'x 1s',\n    animationName: Radium.keyframes(zoomIn, 'zoomIn')\n  },\n  slideInUp: {\n      animation: 'x 1s',\n      animationName: Radium.keyframes(slideInUp, 'slideInUp')\n    },\n    bounce: {\n      animation: 'x 1s',\n      animationName: Radium.keyframes(bounce, 'bounce')\n    },\n    flipInX: {\n      animation: 'x 1s',\n      animationName: Radium.keyframes(flipInX, 'flipInX')\n    },\n}\n\n\n\nclass addQuestions extends Component {\n    constructor(props) {\n\n        super(props);\n        this.state = { \n          fileHash:'',\n          fileUploading:false,\n          description: '',\n          title:'',\n          category:[],\n         files:[],\n         image:'',\n\n          errors:{\n            description:'',\n            category:'',\n            title:'',\n            image:''\n          }\n\n\n       } \n\n\n        this.handleEditorChange = this.handleEditorChange.bind(this)\n        this.handleInputChange = this.handleInputChange.bind(this)\n        this.handleMultiSelectChange = this.handleMultiSelectChange.bind(this)\n        this.handleSubmit= this.handleSubmit.bind(this)\n      }\n\n      onFileChange = (e) => {\n\n        e.preventDefault()\n        const file = e.target.files[0]\n        const reader = new window.FileReader()\n        reader.readAsArrayBuffer(file)\n\n        reader.onloadend = () => {\n        this.setState({ buffer: Buffer(reader.result) })\n        console.log('buffer', this.state.buffer)\n        }\n\n        console.log(\"Submitting file to ipfs...\")\n    };\n\n    async uploadFile(){\n        try {\n            \n            this.setState({\n                fileUploading: true\n            })\n\n            const file = await ipfs.add(this.state.buffer)\n            this.setState({\n                fileHash: file.path,\n                fileUploading: false\n            })\n\n            swal({\n                title: \"Success!!\",\n                text: 'File Posted!!',\n                icon: \"success\"\n            })\n\n            console.log(file.path)\n\n        } catch (error) {\n\n            this.setState({\n                fileUploading: false,\n                buffer: null\n            })\n\n            swal({\n                title: \"OOPS!!\",\n                text: 'Something Went Wrong. Try again!!',\n                icon: \"error\"\n            })\n\n        }\n    }\n\n\n      modules = {\n        toolbar:toolbarOptions, \n        imageCompress: {\n          quality: 0.7,\n          maxWidth: 500,\n          maxHeight: 500, \n          imageType: 'image/jpeg', \n          debug: true\n        }\n      }\n      \n      handleInputChange(event) {\n        const target = event.target;\n        const name = target.name;\n        this.setState({\n          [name]: event.target.value\n        });\n      }\n      handleMultiSelectChange = category => {\n      this.setState({ category:category })\n      }\n      \n      handleEditorChange(value) {\n        this.setState({ description: value })\n      }\n\n      notify = (message) => toast.warning(message);\n      notifyS = (message) => toast.success(message);\n      notifyF = (message) => toast.error(message);\n\n      handleSubmit = async (event) => {\n        event.preventDefault();\n        const isValid = this.formValidation();\n        console.log(this.state);\n        \n        if(isValid){\n            \n            var tagNames = [];\n            var tagIds = [];\n            var len = this.state.category.length;\n            var flag = false;\n             for(var i=0;i<len;i++)\n            {\n              tagNames.push(this.state.category[i].label);\n              tagIds.push(this.state.category[i].value);\n          \n              var interests_ = localStorage.getItem('interests');\n              if(interests_.indexOf(this.state.category[i].value)>-1)\n                flag = true;\n            }\n\n            if(flag) {\n              const newQuestion = {\n                heading: this.state.title,\n                tagNames: tagNames,\n                tagIds: tagIds,\n                description: this.state.description,\n                author: this.props.auth.userId\n              };\n  \n              await this.props.postQuestion(newQuestion);\n              \n              if(this.props.questions.postFail)\n                this.notifyF(\"Some Error occured while posting try again.\");\n              else\n                this.notifyS('Question posted successfully!!')\n\n            }\n            else {\n              this.notify(\"Atleast one category should be in your followed spaces list . you can follow required space to add this question!!\");\n            }\n            \n        }\n      }\n      \n    formValidation = () =>{\n        const{image} = this.state;\n        let imageError, error;\n       \n        if(image){\n            if(image.type!=\"image/jpeg\"&&image.type!=\"image/png\"){\n                imageError=\"You must upoad a valid jpeg/png image file\";\n                error = true;\n            }else if(image.size>=1000000){\n                imageError=\"Maximum permissible size of an image is 1Mb\";\n                error = true;\n            }\n        }\n        this.setState(prevState => ({\n            errors:{\n               \n                image:imageError\n            }\n        }))\n        \n        return !error;\n    }\n\nhandleImageUpload = (e)=>{\n        e.preventDefault();\n        console.log(e.target.files[0])\n        this.setState({\n            image:e.target.files[0],\n            errors:{\n                image:\"\"\n            }\n        })\n    }\n\n\n fetchPrediction =async() =>{\n\n  try {\n    let response = await fetch(\n      \"http://127.0.0.1:8000/\" + `predict?file_hash=${this.state.fileHash}`, \n      {\n        method: \"GET\",\n        headers: { \"Content-Type\": \"application/json\" },\n      }\n    );\n\n    if (response.ok) {\n      response = await response.json();\n      console.log(response);\n      // dispatch({ type: GET_GENERATED_ASSET, payload: response });\n    } else {\n      response = await response.text();\n      console.log(\"Error\", response);\n      throw new Error(response);\n    }\n  } catch (err) {\n    console.log(\"err\", err.message);\n    // dispatch({ type: GENERATED_ASSET_FAILED, payload: err.message });\n  }\n\n}\n  \n      \n      render() {\n        return (\n            \n            <div className=\"forms__section\">\n                <Container>\n                <Col md={9} className=\"contact__main__content\">\n                        <Row>\n                            <Breadcrumb className=\"mb-4 page__navigation__breadCrump\">\n                                <BreadcrumbItem>\n                                    <Link to=\"/home\">Home</Link>\n                                </BreadcrumbItem>\n                                <BreadcrumbItem active>Add Question</BreadcrumbItem>\n                            </Breadcrumb>\n                        </Row>\n                        <div>\n                          <Jumbotron className='form-jumbotron'>\n                            <Form>\n                             \n                             \n                              <Form.Group>\n                                <Form.Label><span className=\"form__icon\"></span>Describe Here</Form.Label><br/>\n                                    { /* <input type=\"file\" name=\"image\"  onChange={this.handleImageUpload} />*/}\n                                      <input \n                                        type=\"file\"\n                                        onChange={(e)=>this.onFileChange(e)}\n                                        className='new-item-card-button'\n                                    />\n                                  <div className=\"invalid__feedback\">{this.state.errors.image}</div>\n                              </Form.Group>\n                              {this.state.image?<>\n                                <Image src='' fluid/> </>:<></>}\n                              <Button onClick={()=>this.uploadFile()} variant=\"info\"><span className='fa fa-paper-plane mr-3' />Submit</Button>\n                              <Button style={{marginLeft:10}} onClick={()=>this.fetchPrediction()} variant=\"info\"><span className='fa fa-cog mr-3' />Predict</Button>\n                              <br/>\n\n                              <Form.Label><p className=\"form__icon\" style={{marginTop:10}}></p>Describe Here</Form.Label><br/>\n                                \n                              <Image src={img} style={{width:\"100%\",marginTop:15,marginBottom:10}}/ >\n                              \n                     {/*}        //  <Form.Label><span className=\"form__icon\" style={{marginTop:10}}></span>Describe Here</Form.Label><br/>\n                                \n                             // <Image src={require(\"/home/jaskaran/Desktop/poogle/Poogle/src/abc.jpg\")} style={{width:\"100%\",marginTop:15}}/ >\n                             // <img src={require(\"./abc.jpg\")} style={{width:\"100%\",marginTop:15}}/ >\n                           */}\n                              \n                            </Form>\n                          </Jumbotron>\n                        </div>\n                </Col>\n                \n                </Container>\n                <ToastContainer\n                  autoClose={false}\n                />\n          </div>\n         \n        )\n      }\n}\n\n\nexport default addQuestions;"]},"metadata":{},"sourceType":"module"}